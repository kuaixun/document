# 主页卡片

### **接口说明**  

主页卡片接口是导航版APP的首页数据获取接口。

### **实现逻辑**
#### 主页属性
主页拥有一系列属性，主要包括配置项字段和一些控制字段：

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| cardSortTime | 卡片排序更新时间，更新时间变化时以服务端排序为准 | long时间戳 |
| dhSearchUrl | 导航搜索风云榜页面地址 | string |
| dhNovelUrl | 导航tab的小说频道列表地址 | string |
| moreFlowUrl | 查询更多流量套餐跳转地址 | string |
| mobBusiUrl | 掌上营业厅跳转地址 | string |

#### 卡片属性
每个卡片都拥有一系列属性，用来控制卡片的展示和实现逻辑：

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| cardId | 主键 | long |
| name | 卡片名称 | String |
| type | 卡片类型，用于唯一标识某种卡片实现，具体定义见卡片类型一节 | String |
| controls | 控制开关字段，由多个具体的控制项组成，每项占一个字节，目前从低位到高位分别表示是否可排序、是否可关闭显示，后续可扩展；举例如返回数字2，对应二级制10，则表示可关闭显示、不可排序 | int |
| index | 排序字段 | long |
| newsList | 新闻类数据项列表，不同的卡片对应的数据项列表字段可能不一样，详细数据项属性见卡片类型一节 | Object Array |
| dataList | 其他类数据项列表，不同的卡片对应的数据项列表字段可能不一样，详细数据项属性见卡片类型一节 | Object Array |

#### 卡片数据更新
由于首页接口数据量大，针对特定卡片客户端可以指定卡片类型，服务端会只查询特定的卡片数据，同时扩展支持查询所有新闻类卡片数据，请求参数：

| 参数 | 说明 | 类型 |
| -- | -- | -- |
| type | 卡片类型，默认返回所有卡片数据，具体的type指定返回特定的卡片数据，扩展kuaixun查询所有快讯新闻类卡片数据 | string |

#### 卡片类型
卡片类型由产品定义，客户端通过接口返回的type字段来识别和实现相应的卡片布局；客户端内置支持一批卡片类型，不识别的卡片类型不显示，新增卡片类型或修改现有卡片布局需通过客户端升级完成。

目前客户端需支持的卡片类型如下：
##### 模块导航
* type定义：*nav*
* 需求说明  
  1.app主要模块导航位，图标、链接、排序后台均可配，固定展示，管理员控制用户不可移除；  
  2.导航模块至少配1行6个（考虑视觉效果），如超过6组则点更多可下拉展示更多隐藏模块，最多展示2行11个；  
  3.导航模块数量1~6个，则单行显示，且不显示更多；数量7~11个，分2行显示，首行最后1个显示为“更多/收起”；  
  4.根据内容分2种跳转方式（app内部和url方式跳转）：新闻-进入app底部资讯tab“推荐”界面；视频-进入app底部视频tab首界面；其他-进入app底部导航对应栏目界面
* 实现说明  
  1.更多逻辑由客户端实现；  
  2.跳转TAB当前定义为1新闻TAB，2视频TAB，3导航TAB；后面扩展的新TAB标识客户端应该判断并屏蔽；
* 字段定义

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| dataId | 主键 | long |
| name | 显示名称 | String |
| img | 显示图标http地址 | String |
| jumpType | 跳转类型,1APP内部TAB频道,2外部URL | int |
| tab | 跳转TAB当前定义为1新闻TAB，2视频TAB，3导航TAB | int |
| coid | 跳转频道ID,如为空则默认跳转TAB第一个频道 | long |
| url | 跳转http地址 | String | 

##### 每日快讯  
* type定义：*news*
* 需求说明  
  1.固定展示4条新闻（第1条固定为左文右图最多2行标题+来源（icon根据配置显示）形式，2-4条固定为纯文字标题单行（icon根据配置显示），点击新闻区块进入新闻正文；  
  2.点击换一换卡片内每次更换4条（从本地缓存里轮播更换），点击更多快讯，进入资讯tab的“推荐”频道；  
  3.新闻为推荐频道编辑推荐内容；  
  4.可设置每隔xx分钟自动取推荐频道最新16条（4条的倍数）存本地（广告除外），按时间倒序显示；  
  5.接口返回数量或内容类型异常时的处理机制；
* 实现说明  
  1.更多快讯和换一换逻辑由客户端实现；  
  2.服务端控制只返回带缩略图的新闻；  
  3.数据更新可以指定请求type；
* 字段定义  
参照接口返回[*findInfoNByCoid5*](findInfoNByCoid5.html)

##### 搞笑视频
* type定义：*funny*
* 需求说明  
  1.固定展示4条视频新闻，均以缩略图+标题形式（标题最多2行）展示，点击视频缩略图+标题区块进入对应页面（不在主页直接播放）；  
  2.点击换一换卡片内每次更换4条（从本地缓存里轮播更换），点击更多视频，进入视频tab的首界面；  
  3.内容为视频内容类型；  
  4.可设置每隔xx分钟自动取最新16条（4条的倍数）存本地（景点直播频道除外），按时间倒序显示；  
  5.接口返回数量或内容类型异常时的处理机制；
* 实现说明  
  1.更多视频和换一换逻辑由客户端实现；  
  2.服务端控制只返回带缩略图的视频新闻；  
  3.数据更新可以指定请求type；
* 字段定义  
参照接口返回[*findInfoNByCoid5*](findInfoNByCoid5.html)

##### 轻松一刻
* type定义：*joke*
* 需求说明  
  1.每1小时自动获取段子频道最新16条入缓存，按时间先后显示1条，点击换一换按顺序循环显示，每次1条；  
  2.均以纯文字形式展示，最多显示400字符（字数超过...），点击内容区域进入对应正文页；  
  3.点击更多笑料，进入资讯tab的段子频道列表；
* 实现说明  
  1.更多笑料和换一换逻辑由客户端实现；  
  2.数据更新可以指定请求type；
* 字段定义  
参照接口返回[*findInfoNByCoid5*](findInfoNByCoid5.html)

##### 美女
* type定义：*beauty*
* 需求说明  
  1.每1小时自动获取美女频道最新16张图入缓存，按时间先后显示2张，点击换一换按顺序循环显示，每次2条；  
  2.2张图片可点，点击后进入资讯tab的美女频道对应图片的幻灯模式，点back返回美女列表；  
  3.点击更多美图，进入资讯tab的美女频道列表；
* 实现说明  
  1.更多美图、幻灯片和换一换逻辑由客户端实现；  
  2.数据更新可以指定请求type；  
* 字段定义  
参照接口返回[*findInfoNByCoid5*](findInfoNByCoid5.html)

##### 推荐站点
* type定义：*site*
* 需求说明  
  展示数量：  
  1.分为默认内容和用户自定义添加内容；  
  2.默认内容预设显示4行15组网站（第16个为添加入口），默认内容只能由管理员控制修改；  
  3.用户可在添加界面新增或取消新增内容（添加界面的网站和分类也由管理员管理），新增的网站在默认网站后排序展示；  
  4.总网站显示数量不做限制；
* 实现说明  
  1.添加的网页保存在客户端，由客户端控制；  
* 字段定义  

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| dataId | 主键 | long |
| name | 网站名称 | String |
| img | 网站图标http地址 | String |
| url | 网页地址 | String |

##### 最常访问
* type定义：*latest*
* 需求说明    
  1.无数据时显示“暂无访问记录”；  
  2.有数据时最多可显示2行8个（每行4组，每组最多显示8个字符）；  
  3.客户端根据用户访问时间显示最近访问的8个常用网址，点击webview方式进入对应网址；  
  4.卡片内显示名称为网页title，排序根据用户最近访问（在app内）的时间由近及远显示；
* 实现说明  
  1.最常访问逻辑由客户端实现；  
* 字段定义  
无

##### 实时热点
* type定义：*hot*
* 需求说明  
  1.每1小时自动获取快讯抓取百度热词接口最新18条入缓存，按时间先后显示1-6条，点击换一换按顺序循环显示，每次6条；  
  2.均以纯文字形式展示，每组至少能显示16个字符（超过字符...），单行显示，，点击单条热词进入对应热词百度搜索页面；   
  3.点击更多热点，进入导航搜索风云榜页面；  
* 实现说明  
  1.换一换由客户端实现；  
  2.导航搜索风云榜页面地址通过配置对象字段返回；
* 字段定义  

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| dataId | 主键 | long |
| name | 热词名称 | String |

##### 小说
* type定义：*novel*
* 需求说明  
  1.推荐3本含封面小说（单行标题）+2条文字小说（单行标题，含xx次阅读的备注）均通过后台人工配置更新；  
  2.点击换一换，更新上方5条后台配置的内容（后台可多配1-2倍对应数据，图片和文字类对应更换）；  
  3.点击更多小说进入导航小说页面；
* 实现说明  
  1.换一换由客户端实现；  
  2.导航tab的小说频道列表地址通过配置对象字段返回；  
* 字段定义  

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| dataId | 主键 | long |
| name | 小说主题 | String |
| img | 小说封面地址 | String |
| url | 小说跳转地址 | String |
| readCount | 阅读数量 | long |

##### 广告
* type定义：*ad*
* 需求说明  
  1.该卡片不在卡片管理内显示，由管理员控制是否发布和排序（在app内显示）；  
  2.广告卡片内容对接直投平台广告位，纯图片，支持单张（单张时不显示锚点）或多张（最多5张），用户可关闭（app缓存清除后重现）
* 实现说明  
  1.广告不可排序；  
  2.广告显示类型支持扩展；
* 字段定义  

| 属性 | 说明 | 类型 |
| -- | -- | -- |
| dataId | 主键 | long |
| showType | 广告展示类型，1单张大图，其他待扩展 | int |
| name | 广告主题 | String |
| img | 广告图片地址 | String |
| url | 广告跳转地址 | String |

##### 话费流量查询
* type定义：*flow*
* 需求说明  
  1.调流量查询接口定期获取最新话费余额和流量余额数据；  
  2.点击中间区块和更多查询进入个人中心话费流量查询详情页；  
  3.点击刷新在卡片内刷新数据（如有更新再更换），同时显示卡片更新时间；  
  4.如果用户没有流量套餐，则话费居中显示;
* 实现说明  
  1.话费流量刷新由客户端调用接口获取数据；
* 字段定义  
  待定
   
#### **请求说明**

* 请求方法 *homeCards*

* 请求参数

* 返回参数

* 响应示例

```

```